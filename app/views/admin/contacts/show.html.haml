%h2= @contact.class.to_s.demodulize

%p
  %strong{ :style => "font-weight:600;" }= "Issue ##{@contact.issue}"
  = "(#{@contact.state.humanize}), received on"
  %span{ :style => "font-weight:600;" }= "#{l(@contact.created_at, format: :full)}"
  - if @contact.replied?
    = ", replied on"
    %span{ :style => "font-weight:600;" }= "#{l(@contact.replied_at, format: :full)}"

  %p
    %strong{ :style => "font-weight:600;" }= "From:"
    = mail_to(@contact.email)

  - if @contact.is_a?(Contact::Job) && @contact.job_id?
    %p
      %strong{ :style => "font-weight:600;" }= "Application for:"
      = link_to @contact.job.title, admin_job_path(@contact.job)

  - if @contact.file.present?
    %p
      %strong{ :style => "font-weight:600;" }= "Attachment:"
      = link_to @contact.file_filename, @contact.file_url
%br

.contact
  = RedCloth.new(@contact.message).to_html.html_safe

%br
%p= reply_link(@contact)
%br

%p
  %strong{ :style => "font-weight:600;" }= "Update this message"

= form_for @contact, as: :contact, url: admin_contact_path(@contact), html: { method: :put } do |f|
  .entry
    = f.label :comment, "Comment"
    = f.text_area :comment
    .entry
      = f.label :replied, "Archived:"
      = f.check_box :archived, checked: @contact.archived?
  .entry
    = f.label :replied, "Replied:"
    = f.check_box :replied, checked: @contact.replied?
  .entry= f.submit "Update"

%br
%hr
= link_to "Back to the contact list", admin_contacts_path
